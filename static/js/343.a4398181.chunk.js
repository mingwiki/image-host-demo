"use strict";(self.webpackChunkimgurl=self.webpackChunkimgurl||[]).push([[343],{1343:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(2791),i=r(8907),u=r(3433),l=r(9439),a=r(1732),s=r(3695),c=r(7083),o=r(9553),h=r(6354),d=r(9286),g=r(5677),f=r(184),m=(0,i.Pi)((function(){var e=(0,n.useContext)(a.Z),t=e.ImageStore,r=e.UserStore,i=(0,n.useState)(!1),m=(0,l.Z)(i,2),x=m[0],p=m[1],j=(0,n.useState)(""),v=(0,l.Z)(j,2),Z=v[0],w=v[1],b=(0,n.useState)(""),C=(0,l.Z)(b,2),P=C[0],S=C[1],N=(0,n.useState)([]),T=(0,l.Z)(N,2),k=T[0],U=T[1],y=(0,f.jsxs)("div",{children:[(0,f.jsx)(d.Z,{}),(0,f.jsx)("div",{style:{marginTop:8},children:"\u591a\u6587\u4ef6\u4e0a\u4f20"})]});return(0,f.jsx)(g.AE,{children:(0,f.jsxs)(c.Z,{spinning:t.isUploading,size:"large",tip:"\u56fe\u7247\u6b63\u5728\u4e0a\u4f20\u4e2d",children:[(0,f.jsx)(o.Z,{listType:"picture-card",fileList:k,onPreview:function(e){w(e.url),p(!0),S(e.name||e.url.substring(e.url.lastIndexOf("/")+1))},onRemove:function(e){U(k.filter((function(t){return t!==e})))},customRequest:function(e){var n=e.file;t.setFile(n),t.setName(n.name),r.currentUser?/^(image\/)/i.test(n.type)?n.size>104857600?s.ZP.error("\u5355\u5f20\u56fe\u7247\u4f53\u79ef\u5e94\u5c0f\u4e8e100M"):t.upload().then((function(e){U((function(t){return[].concat((0,u.Z)(t),[{uid:n.uid,name:n.name,status:"done",url:e.attributes.attachments[0].attributes.url,width:"",height:"",fullurl:""}])})),s.ZP.success("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f")}),(function(e){U((function(e){return[].concat((0,u.Z)(e),[{uid:n.uid,name:n.name,status:"error"}])})),s.ZP.error("\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"),console.log("\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25",e)})):s.ZP.error("\u8bf7\u4e0a\u4f20\u4e00\u5f20\u6216\u591a\u5f20\u4efb\u610f\u7c7b\u578b\u56fe\u7247"):s.ZP.error("\u8bf7\u5148\u767b\u5f55\u518d\u4e0a\u4f20")},multiple:!0,children:y}),0===k.length?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.nV,{children:"\u4e0a\u4f20\u7ed3\u679c"}),(0,f.jsx)(g.Tu,{children:k.map((function(e){return(0,f.jsxs)(g.ae,{children:[(0,f.jsx)("a",{href:e.fullurl||e.url,target:"_blank",rel:"noreferrer",children:e.name}),(0,f.jsx)("input",{onChange:function(t){return function(e,t){t.width=isNaN(e.target.value)?"":e.target.value,t.fullurl=t.url+(""===t.width&&""===t.height?"":"?/imageview2/0")+(""!==t.width?"/w/".concat(t.width):"")+(""!==t.height?"/h/".concat(t.height):""),U((0,u.Z)(k))}(t,e)},placeholder:"\u8bbe\u7f6e\u5bbd\u5ea6\uff1a\u9ed8\u8ba4"}),(0,f.jsx)("input",{onChange:function(t){return function(e,t){t.height=isNaN(e.target.value)?"":e.target.value,t.fullurl=t.url+(""===t.width&&""===t.height?"":"?/imageview2/0")+(""!==t.width?"/w/".concat(t.width):"")+(""!==t.height?"/h/".concat(t.height):""),U((0,u.Z)(k))}(t,e)},placeholder:"\u8bbe\u7f6e\u957f\u5ea6\uff1a\u9ed8\u8ba4"}),(0,f.jsx)(g.CK,{onClick:function(t){e.url?(navigator.clipboard.writeText(e.fullurl||e.url),t.target.innerText="(\u94fe\u63a5\u5df2\u590d\u5236)"):(navigator.clipboard.writeText(e.name),t.target.innerText="(\u540d\u79f0\u5df2\u590d\u5236)"),t.target.className.toString().split(" ").includes("active")||(t.target.className+=" active")},children:e.url?"\u70b9\u51fb\u590d\u5236\u94fe\u63a5":"\u70b9\u51fb\u590d\u5236\u540d\u79f0"})]},e.uid)}))})]}),(0,f.jsx)(h.Z,{visible:x,title:P,footer:null,onCancel:function(){return p(!1)},children:(0,f.jsx)("img",{alt:"example",style:{width:"100%"},src:Z})})]})})})),x=(0,i.Pi)((function(){var e=(0,n.useContext)(a.Z).UserStore;return(0,f.jsxs)(f.Fragment,{children:[e.currentUser?(0,f.jsxs)(g.CR,{children:["\u6b22\u8fce\u56de\u6765, ",e.currentUser.attributes.username]}):(0,f.jsx)(g.L1,{children:"\u8bf7\u5148\u767b\u5f55\u518d\u4e0a\u4f20"}),(0,f.jsx)(m,{})]})}))}}]);
//# sourceMappingURL=343.a4398181.chunk.js.map